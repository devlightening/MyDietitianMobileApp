(()=>{var e={};e.id=188,e.ids=[188],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(4834),s(8032),s(5866),s(4752);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["(dashboard)",{children:["clients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4834)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\(dashboard)\\clients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8032)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\(dashboard)\\clients\\page.tsx"],x="/(dashboard)/clients/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/clients/page",pathname:"/clients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3906:(e,t,s)=>{Promise.resolve().then(s.bind(s,1071))},1071:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(326),a=s(2473),i=s(6824),l=s(636),n=s(1021),c=s(3679),d=s(1441),o=s(1405),x=s(7888),m=s(4061),u=s(7577),p=s(7863);async function h(){return(await i.Z.get("/api/dietitian/live-clients")).data.ActiveClients||[]}function g(){let[e,t]=(0,u.useState)(0),{data:s,isLoading:i,error:g,refetch:f,isRefetching:b}=(0,a.a)({queryKey:["live-clients",e],queryFn:h,refetchInterval:3e4,refetchIntervalInBackground:!0}),y=()=>{t(e=>e+1),f()};if(i)return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(d.O,{className:"h-8 w-32 mb-2"}),r.jsx(d.O,{className:"h-4 w-64"})]}),r.jsx(d.O,{className:"h-10 w-24"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)(n.Z,{className:"p-6",children:[r.jsx(d.O,{className:"h-6 w-3/4 mb-4"}),r.jsx(d.O,{className:"h-12 w-20 mb-4"}),r.jsx(d.O,{className:"h-4 w-full mb-2"}),r.jsx(d.O,{className:"h-4 w-2/3"})]},t))})]});if(g)return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Clients"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Today's compliance overview"})]}),(0,r.jsxs)(c.z,{variant:"secondary",onClick:y,disabled:b,children:[r.jsx(o.Z,{className:(0,p.cn)("w-4 h-4 mr-2",b&&"animate-spin")}),"Refresh"]})]}),r.jsx(n.Z,{className:"p-12 text-center",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-6",children:r.jsx(x.Z,{className:"w-8 h-8 text-destructive"})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Failed to load clients"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:g instanceof Error?g.message:"Something went wrong. Please try again."}),(0,r.jsxs)(c.z,{variant:"primary",onClick:y,disabled:b,children:[r.jsx(o.Z,{className:(0,p.cn)("w-4 h-4 mr-2",b&&"animate-spin")}),"Retry"]})]})})]});let j=s&&s.length>0;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Clients"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Today's compliance overview"})]}),(0,r.jsxs)(c.z,{variant:"secondary",onClick:y,disabled:b,children:[r.jsx(o.Z,{className:(0,p.cn)("w-4 h-4 mr-2",b&&"animate-spin")}),"Refresh"]})]}),j?r.jsx(l.$,{clients:s.map(e=>({clientId:e.clientId,clientName:e.clientName,todayCompliancePercentage:e.todayCompliancePercentage,lastActivity:e.lastActivity,currentMeal:e.currentMeal,lastMealItem:e.lastMealItem}))}):r.jsx(n.Z,{className:"p-12 text-center",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-6",children:r.jsx(m.Z,{className:"w-8 h-8 text-muted-foreground"})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No clients yet"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Start by generating access keys for your clients."})]})})]})}},636:(e,t,s)=>{"use strict";s.d(t,{$:()=>u});var r=s(326),a=s(434),i=s(1021),l=s(7863);function n({compliancePercentage:e,hasActivity:t=!0,className:s}){let a=t?e>=80?{bg:"bg-green-500/10",border:"border-green-500/50",text:"text-green-500",label:"Excellent"}:e>=50?{bg:"bg-yellow-500/10",border:"border-yellow-500/50",text:"text-yellow-500",label:"Good"}:{bg:"bg-red-500/10",border:"border-red-500/50",text:"text-red-500",label:"Needs attention"}:{bg:"bg-muted/20",border:"border-muted",text:"text-muted-foreground",label:"No activity"};return(0,r.jsxs)("div",{className:(0,l.cn)("inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border",a.bg,a.border,a.text,s),children:[r.jsx("div",{className:(0,l.cn)("w-2 h-2 rounded-full",a.bg,a.border.replace("/50",""))}),r.jsx("span",{className:"text-xs font-medium",children:a.label})]})}var c=s(8998);let d=(0,s(6557).Z)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);var o=s(4230),x=s(1333);function m({client:e}){var t;let s=(0,x.T)("clients"),m=null!==e.lastActivity,u=(t=e.todayCompliancePercentage,m?t>=80?"text-green-500":t>=50?"text-yellow-500":"text-red-500":"text-muted-foreground");return r.jsx(a.default,{href:`/dashboard/clients/${e.clientId}`,children:r.jsx(i.Z,{className:"p-6 hover:shadow-lg hover:border-primary/50 transition-all duration-200 cursor-pointer group h-full",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:e.clientName}),r.jsx(n,{compliancePercentage:e.todayCompliancePercentage,hasActivity:m})]})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:(0,l.cn)("text-4xl font-bold",u),children:m?e.todayCompliancePercentage.toFixed(0):"—"}),m&&r.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("compliance")})]}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[e.lastActivity&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(c.Z,{className:"w-4 h-4"}),r.jsx("span",{children:function(e){if(!e)return"No activity";try{let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/6e4);if(r<1)return"Just now";if(r<60)return`${r} min ago`;let a=Math.floor(r/60);if(a<24)return`${a} hour${a>1?"s":""} ago`;let i=Math.floor(a/24);return`${i} day${i>1?"s":""} ago`}catch{return"Unknown"}}(e.lastActivity)})]}),e.currentMeal&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{children:e.currentMeal}),e.lastMealItem&&(0,r.jsxs)("span",{className:"text-xs",children:["• ",e.lastMealItem]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-primary group-hover:gap-3 transition-all",children:[r.jsx("span",{children:s("viewDetails")}),r.jsx(o.Z,{className:"w-4 h-4"})]})})]})})})}function u({clients:e}){return 0===e.length?null:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>r.jsx(m,{client:e},e.clientId))})}},6824:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let r=s(4464).Z.create({withCredentials:!0});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>Promise.reject({status:e.response?.status??500,code:e.response?.data?.error??"UNKNOWN_ERROR",message:e.response?.data?.message??e.message??"An unexpected error occurred"}));let a=r},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\hy971\source\repos\MyDietitianMobileApp\web-panel\app\(dashboard)\clients\page.tsx#default`)},8032:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9510),a=s(1492),i=s(302);function l({children:e}){return r.jsx(a.Z,{children:r.jsx(i.L,{children:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[74,115,778,681],()=>s(1339));module.exports=r})();