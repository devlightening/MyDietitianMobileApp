(()=>{var e={};e.id=611,e.ids=[611],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},9919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d}),s(6350),s(596),s(4752),s(5866);var r=s(3191),i=s(8716),a=s(7922),n=s.n(a),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["ingredients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6350)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\admin\\ingredients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,596)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\hy971\\source\\repos\\MyDietitianMobileApp\\web-panel\\app\\admin\\ingredients\\page.tsx"],u="/admin/ingredients/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/ingredients/page",pathname:"/admin/ingredients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3727:(e,t,s)=>{Promise.resolve().then(s.bind(s,8506))},296:(e,t,s)=>{Promise.resolve().then(s.bind(s,2802))},8506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(326),i=s(7577),a=s(2473),n=s(6293),l=s(5204),c=s(6824);async function d(){return(await c.Z.get("/api/admin/ingredients")).data.ingredients||[]}async function o(e){return(await c.Z.post("/api/admin/ingredients",e)).data}async function u(e,t){return(await c.Z.put(`/api/admin/ingredients/${e}`,t)).data}async function x(e,t){return(await c.Z.patch(`/api/admin/ingredients/${e}/toggle-active`,{isActive:t})).data}let m=["admin","ingredients"];var p=s(5833),h=s(3679),y=s(6557);let f=(0,y.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),g=(0,y.Z)("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),j=(0,y.Z)("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]);var v=s(1333);function N({ingredients:e,onEdit:t,onToggleActive:s}){let i=(0,v.T)("admin.ingredients");return 0===e.length?null:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-border",children:[r.jsx("th",{className:"text-left p-4 font-semibold text-foreground",children:i("canonicalName")}),r.jsx("th",{className:"text-left p-4 font-semibold text-foreground",children:i("aliases")}),r.jsx("th",{className:"text-left p-4 font-semibold text-foreground",children:i("status")}),r.jsx("th",{className:"text-right p-4 font-semibold text-foreground",children:i("actions")})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[r.jsx("td",{className:"p-4",children:r.jsx("span",{className:e.isActive?"":"text-muted-foreground",children:e.canonicalName})}),r.jsx("td",{className:"p-4",children:e.aliases&&e.aliases.length>0?r.jsx("div",{className:"flex flex-wrap gap-1",children:e.aliases.map((e,t)=>r.jsx(p.C,{variant:"secondary",className:"text-xs",children:e},t))}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"â€”"})}),r.jsx("td",{className:"p-4",children:r.jsx(p.C,{variant:"secondary",className:e.isActive?"bg-green-500/20 text-green-500 border-green-500/30":"",children:e.isActive?i("active"):i("passive")})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsxs)(h.z,{variant:"secondary",onClick:()=>t(e),className:"text-sm px-3 py-1",children:[r.jsx(f,{className:"w-4 h-4 mr-1"}),i("edit")]}),r.jsx(h.z,{variant:"secondary",onClick:()=>s(e.id,!e.isActive),className:"text-sm px-3 py-1",children:e.isActive?(0,r.jsxs)(r.Fragment,{children:[r.jsx(g,{className:"w-4 h-4 mr-1"}),i("deactivate")]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(j,{className:"w-4 h-4 mr-1"}),i("activate")]})})]})})]},e.id))})]})})}var b=s(4231),w=s(1021),k=s(4019),A=s(3855);let q=(0,y.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function C({isOpen:e,onClose:t,onSubmit:s,initialData:a,isLoading:n=!1}){let l=(0,v.T)("admin.ingredients"),c=(0,v.T)("common"),[d,o]=(0,i.useState)(""),[u,x]=(0,i.useState)([]),[m,p]=(0,i.useState)(""),[y,f]=(0,i.useState)(!0);if(!e)return null;let g=()=>{m.trim()&&!u.includes(m.trim())&&(x([...u,m.trim()]),p(""))},j=e=>{x(u.filter((t,s)=>s!==e))},N=d.trim()&&!n;return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsx(w.Z,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-foreground",children:l(a?"editIngredient":"createIngredient")}),r.jsx(h.z,{variant:"secondary",onClick:t,className:"px-3 py-1",children:r.jsx(k.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&s({canonicalName:d.trim(),aliases:u.filter(e=>e.trim()),isActive:y})},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:[l("canonicalName")," ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(b.I,{value:d,onChange:e=>o(e.target.value),placeholder:l("canonicalNamePlaceholder"),required:!0,disabled:n})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:l("aliases")}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(b.I,{value:m,onChange:e=>p(e.target.value),placeholder:l("aliasPlaceholder"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),g())},disabled:n}),r.jsx(h.z,{type:"button",variant:"secondary",onClick:g,disabled:!m.trim()||n,children:r.jsx(A.Z,{className:"w-4 h-4"})})]}),u.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1 bg-muted rounded-md",children:[r.jsx("span",{className:"text-sm",children:e}),r.jsx("button",{type:"button",onClick:()=>j(t),className:"text-muted-foreground hover:text-foreground",disabled:n,children:r.jsx(q,{className:"w-3 h-3"})})]},t))})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:y,onChange:e=>f(e.target.checked),disabled:n,className:"w-4 h-4"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm text-foreground",children:l("isActive")})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4",children:[r.jsx(h.z,{type:"button",variant:"secondary",onClick:t,disabled:n,children:c("cancel")}),r.jsx(h.z,{type:"submit",variant:"primary",disabled:!N,children:n?c("loading"):l(a?"update":"create")})]})]})]})})})}var Z=s(2081),M=s(3731),P=s(1929),_=s(1441);function D(){let e=(0,v.T)("admin.ingredients"),t=(0,v.T)("common"),s=(0,v.T)("errors"),{data:c,isLoading:p,isError:y,error:f,refetch:g}=(0,a.a)({queryKey:m,queryFn:d,retry:1}),j=function(){let e=(0,n.NL)();return(0,l.D)({mutationFn:o,onSuccess:()=>{e.invalidateQueries({queryKey:m})}})}(),b=function(){let e=(0,n.NL)();return(0,l.D)({mutationFn:({id:e,data:t})=>u(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:m})}})}(),k=function(){let e=(0,n.NL)();return(0,l.D)({mutationFn:({id:e,isActive:t})=>x(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:m})}})}(),[q,D]=(0,i.useState)(!1),[S,T]=(0,i.useState)(null),[I,O]=(0,i.useState)(null),E=(e,t)=>{O({type:e,message:t}),setTimeout(()=>O(null),3e3)},R=async t=>{try{S?(await b.mutateAsync({id:S.id,data:t}),E("success",e("updateSuccess"))):(await j.mutateAsync(t),E("success",e("createSuccess"))),D(!1),T(null)}catch(t){E("error",t&&"object"==typeof t&&"code"in t?s((0,Z.C)(t.code)):t?.message||e("errorOccurred"))}},F=async(t,r)=>{try{await k.mutateAsync({id:t,isActive:r}),E("success",r?e("activateSuccess"):e("deactivateSuccess"))}catch(t){E("error",t&&"object"==typeof t&&"code"in t?s((0,Z.C)(t.code)):t?.message||e("errorOccurred"))}};if(p)return(0,r.jsxs)("div",{className:"space-y-8 p-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:e("title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:e("subtitle")})]})}),r.jsx(w.Z,{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>r.jsx(_.O,{className:"h-16 w-full"},t))})})]});if(y){let i=f&&"object"==typeof f&&"code"in f?s((0,Z.C)(f.code)):f&&"object"==typeof f&&"message"in f?f.message:t("error");return(0,r.jsxs)("div",{className:"space-y-8 p-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:e("title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:e("subtitle")})]})}),r.jsx(P.Z,{title:e("failedToLoad"),message:i,onRetry:()=>g(),retryLabel:t("retry")})]})}return(0,r.jsxs)("div",{className:"space-y-8 p-6",children:[I&&r.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${"success"===I.type?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:I.message}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:e("title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:e("subtitle")})]}),(0,r.jsxs)(h.z,{variant:"primary",onClick:()=>{T(null),D(!0)},children:[r.jsx(A.Z,{className:"w-4 h-4 mr-2"}),e("createIngredient")]})]}),c&&0===c.length?r.jsx(M.Z,{title:e("noIngredients"),description:e("noIngredientsDescription")}):r.jsx(w.Z,{className:"p-6",children:r.jsx(N,{ingredients:c||[],onEdit:e=>{T(e),D(!0)},onToggleActive:F})}),r.jsx(C,{isOpen:q,onClose:()=>{D(!1),T(null)},onSubmit:R,initialData:S,isLoading:j.isPending||b.isPending})]})}},2802:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(326),i=s(7577),a=s(5047);s(6824);var n=s(1441),l=s(8545);function c({children:e}){(0,a.useRouter)();let[t,s]=(0,i.useState)(!0);return t?r.jsx(l.AppLayout,{children:(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[r.jsx(n.O,{className:"h-8 w-64"}),r.jsx(n.O,{className:"h-64 w-full"})]})}):r.jsx(l.AppLayout,{children:e})}},3731:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(326),i=s(1021),a=s(4061);function n({title:e,description:t,action:s,icon:n}){return r.jsx(i.Z,{className:"p-12",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:n||r.jsx(a.Z,{className:"h-8 w-8 text-muted-foreground"})}),r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e}),r.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:t}),s&&r.jsx("div",{className:"pt-2",children:s})]})})}},1929:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(326),i=s(1021),a=s(3679),n=s(7888);function l({title:e,message:t,onRetry:s,retryLabel:l="Retry",isRetrying:c=!1}){return r.jsx(i.Z,{className:"p-12",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:r.jsx(n.Z,{className:"h-8 w-8 text-destructive"})}),e&&r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e}),r.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:t}),s&&r.jsx("div",{className:"pt-2",children:r.jsx(a.z,{variant:"primary",onClick:s,disabled:c,children:l})})]})})}},5833:(e,t,s)=>{"use strict";s.d(t,{C:()=>a});var r=s(326),i=s(7863);function a({children:e,variant:t="primary",className:s}){return r.jsx("span",{className:(0,i.cn)("inline-block px-3 py-1 rounded-full text-xs font-semibold bg-accent/10 text-accent","secondary"===t&&"bg-muted/20 text-muted-foreground","danger"===t&&"bg-danger/10 text-danger",s),children:e})}},2081:(e,t,s)=>{"use strict";function r(e){return({DIETITIAN_NOT_FOUND:"dietitianNotFound",INGREDIENT_NOT_FOUND:"ingredientNotFound",UNAUTHORIZED:"unauthorized",NOT_FOUND:"notFound",INVALID_OPERATION:"invalidOperation",INVALID_ARGUMENT:"invalidArgument",INTERNAL_SERVER_ERROR:"serverError"})[e]||"generic"}s.d(t,{C:()=>r})},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6350:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\hy971\source\repos\MyDietitianMobileApp\web-panel\app\admin\ingredients\page.tsx#default`)},596:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\hy971\source\repos\MyDietitianMobileApp\web-panel\app\admin\layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[74,115,778,220],()=>s(9919));module.exports=r})();