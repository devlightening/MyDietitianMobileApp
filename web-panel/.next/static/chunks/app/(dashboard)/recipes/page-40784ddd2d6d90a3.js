(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{7577:function(t,e,s){Promise.resolve().then(s.bind(s,8222))},8222:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var i=s(7437),r=s(9693),n=s(2464),a=s(2884),o=s(9116),u=s(2265),l=s(7233),c=s(9178),d=s(4226),h=s(8068),m=s(9397),p=s(2252),f=s(5317);function v(t){let{onChange:e}=t,[s,r]=(0,u.useState)([{name:"",amount:""}]);function n(t,i,n){let a=s.map((e,s)=>s===t?{...e,[i]:n}:e);r(a),null==e||e(a)}return(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Ingredients"}),(0,i.jsxs)("div",{className:"space-y-2",children:[s.map((t,a)=>(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(h.I,{className:"flex-1",placeholder:"Ingredient name",value:t.name,onChange:t=>n(a,"name",t.target.value),required:!0}),(0,i.jsx)(h.I,{className:"w-32",placeholder:"Amount",value:t.amount,onChange:t=>n(a,"amount",t.target.value),required:!0}),s.length>1&&(0,i.jsx)(d.z,{type:"button",variant:"danger",onClick:()=>(function(t){let i=s.filter((e,s)=>s!==t);r(i),null==e||e(i)})(a),className:"px-3",children:"Remove"})]},a)),(0,i.jsxs)(d.z,{type:"button",variant:"secondary",onClick:function(){r([...s,{name:"",amount:""}])},className:"w-full sm:w-auto",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Add Ingredient"]})]})]})}async function x(){try{return(await o.Z.get("/api/recipes?dietitianId=me")).data.recipes}catch(t){throw Error((null==t?void 0:t.toString())||"Failed to load recipes")}}function g(t){return o.Z.post("/api/recipes",t)}function b(){let t=(0,r.NL)(),{data:e,isLoading:s,error:o,refetch:b}=(0,n.a)({queryKey:["recipes"],queryFn:x}),[y,N]=(0,u.useState)(""),[j,w]=(0,u.useState)(""),R=(0,a.D)({mutationFn:g,onSuccess:()=>{t.invalidateQueries({queryKey:["recipes"]}),N(""),w("")}});return(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"Recipes"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your recipe collection"})]})}),(0,i.jsxs)(c.Z,{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-6",children:"Add New Recipe"}),(0,i.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:t=>{t.preventDefault(),R.mutate({name:y,description:j})},children:[(0,i.jsx)(h.I,{placeholder:"Recipe name",value:y,onChange:t=>N(t.target.value),required:!0}),(0,i.jsx)(h.I,{placeholder:"Description",value:j,onChange:t=>w(t.target.value),required:!0}),(0,i.jsx)(v,{}),(0,i.jsxs)(d.z,{type:"submit",variant:"primary",loading:R.isLoading,disabled:R.isLoading,className:"w-full sm:w-auto",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),R.isLoading?"Adding...":"Add Recipe"]})]})]}),s?(0,i.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((t,e)=>(0,i.jsxs)(c.Z,{className:"p-4",children:[(0,i.jsx)(l.O,{className:"h-6 w-1/3 mb-2"}),(0,i.jsx)(l.O,{className:"h-4 w-2/3"})]},e))}):o?(0,i.jsx)(c.Z,{className:"p-12 text-center",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(p.Z,{className:"w-8 h-8 text-destructive"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Failed to load recipes"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:o instanceof Error?o.message:String(o)||"Something went wrong. Please try again."}),(0,i.jsx)(d.z,{variant:"primary",onClick:()=>b(),children:"Retry"})]})}):(null==e?void 0:e.length)===0?(0,i.jsx)(c.Z,{className:"p-12 text-center",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(f.Z,{className:"w-8 h-8 text-muted-foreground"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No recipes yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start by adding a recipe for your clients to enjoy!"})]})}):(0,i.jsx)("div",{className:"space-y-4",children:null==e?void 0:e.map(t=>(0,i.jsxs)(c.Z,{className:"p-6 hover:shadow-lg transition-all duration-200 hover:border-primary/50",children:[(0,i.jsx)("h4",{className:"font-semibold text-foreground text-lg mb-2",children:t.name}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:t.description})]},t.id))})]})}},4226:function(t,e,s){"use strict";s.d(e,{z:function(){return n}});var i=s(7437),r=s(4508);let n=(0,s(2265).forwardRef)((t,e)=>{let{variant:s="primary",loading:n,className:a,disabled:o,children:u,...l}=t;return(0,i.jsx)("button",{ref:e,disabled:o||n,className:(0,r.cn)("px-4 py-2 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","primary"===s&&"bg-primary text-primary-foreground hover:bg-primary/90","secondary"===s&&"bg-secondary text-secondary-foreground hover:bg-secondary/80","danger"===s&&"bg-danger text-danger-foreground hover:bg-danger/90",(o||n)&&"opacity-60 cursor-not-allowed",a),...l,children:n?(0,i.jsx)("span",{className:"animate-pulse",children:"..."}):u})});n.displayName="Button"},9178:function(t,e,s){"use strict";s.d(e,{Z:function(){return n}});var i=s(7437),r=s(4508);function n(t){let{className:e,children:s}=t;return(0,i.jsx)("div",{className:(0,r.cn)("rounded-xl bg-card border border-border shadow-sm transition-all duration-200",e),children:s})}},8068:function(t,e,s){"use strict";s.d(e,{I:function(){return n}});var i=s(7437),r=s(4508);let n=(0,s(2265).forwardRef)((t,e)=>{let{label:s,error:n,helperText:a,className:o,...u}=t;return(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[s&&(0,i.jsx)("label",{className:"text-sm font-medium text-foreground/80",children:s}),(0,i.jsx)("input",{ref:e,className:(0,r.cn)("border border-input rounded-md px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background",n&&"border-danger",o),...u}),n?(0,i.jsx)("span",{className:"text-xs text-danger mt-1",children:n}):a&&(0,i.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:a})]})});n.displayName="Input"},7233:function(t,e,s){"use strict";s.d(e,{O:function(){return r}});var i=s(7437);function r(t){let{className:e="",...s}=t;return(0,i.jsx)("div",{className:"animate-pulse rounded bg-muted/60 "+e,...s})}s(2265)},9116:function(t,e,s){"use strict";let i=s(3464).Z.create({withCredentials:!0});i.interceptors.request.use(t=>t),i.interceptors.response.use(t=>t,t=>{var e,s,i,r,n,a,o,u,l,c;return(null===(e=t.response)||void 0===e?void 0:e.status)===401?(window.location.href="/auth/login",Promise.reject(t)):Promise.reject({status:null!==(o=null===(s=t.response)||void 0===s?void 0:s.status)&&void 0!==o?o:500,code:null!==(u=null===(r=t.response)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.error)&&void 0!==u?u:"UNKNOWN_ERROR",message:null!==(c=null!==(l=null===(a=t.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.message)&&void 0!==l?l:t.message)&&void 0!==c?c:"An unexpected error occurred"})}),e.Z=i},4508:function(t,e,s){"use strict";function i(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.filter(Boolean).join(" ")}s.d(e,{cn:function(){return i}})},2252:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5317:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9763).Z)("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]])},9397:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2585:function(t,e,s){"use strict";s.d(e,{_:function(){return i}});let i=console},2819:function(t,e,s){"use strict";s.d(e,{R:function(){return u},m:function(){return o}});var i=s(2585),r=s(7154),n=s(851),a=s(67);class o extends n.F{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||i._,this.observers=[],this.state=t.state||u(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(e=>e!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){var t,e,s,i,r,n,o,u,l,c,d,h,m,p,f,v,x,g,b,y;let N="loading"===this.state.status;try{if(!N){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(l=(c=this.mutationCache.config).onMutate)?void 0:l.call(c,this.state.variables,this));let t=await (null==(d=(h=this.options).onMutate)?void 0:d.call(h,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}let m=await (()=>{var t;return this.retryer=(0,a.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(t=(e=this.mutationCache.config).onSuccess)?void 0:t.call(e,m,this.state.variables,this.state.context,this)),await (null==(s=(i=this.options).onSuccess)?void 0:s.call(i,m,this.state.variables,this.state.context)),await (null==(r=(n=this.mutationCache.config).onSettled)?void 0:r.call(n,m,null,this.state.variables,this.state.context,this)),await (null==(o=(u=this.options).onSettled)?void 0:o.call(u,m,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:m}),m}catch(t){try{throw await (null==(m=(p=this.mutationCache.config).onError)?void 0:m.call(p,t,this.state.variables,this.state.context,this)),await (null==(f=(v=this.options).onError)?void 0:f.call(v,t,this.state.variables,this.state.context)),await (null==(x=(g=this.mutationCache.config).onSettled)?void 0:x.call(g,void 0,t,this.state.variables,this.state.context,this)),await (null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,a.Kw)(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),r.V.batch(()=>{this.observers.forEach(e=>{e.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function u(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},851:function(t,e,s){"use strict";s.d(e,{F:function(){return r}});var i=s(830);class r{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,i.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:i.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},2884:function(t,e,s){"use strict";s.d(e,{D:function(){return h}});var i=s(2265),r=s(830),n=s(2819),a=s(7154),o=s(5176);class u extends o.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let s=this.options;this.options=this.client.defaultMutationOptions(t),(0,r.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,n.R)(),e="loading"===t.status,s={...t,isLoading:e,isPending:e,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,s,i,r,n,a,o,u;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(i=(r=this.mutateOptions).onSettled)||i.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(n=(a=this.mutateOptions).onError)||n.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(u=this.mutateOptions).onSettled)||o.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}}var l=s(7814),c=s(9693),d=s(2470);function h(t,e,s){let n=(0,r.lV)(t,e,s),o=(0,c.NL)({context:n.context}),[h]=i.useState(()=>new u(o,n));i.useEffect(()=>{h.setOptions(n)},[h,n]);let p=(0,l.$)(i.useCallback(t=>h.subscribe(a.V.batchCalls(t)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),f=i.useCallback((t,e)=>{h.mutate(t,e).catch(m)},[h]);if(p.error&&(0,d.L)(h.options.useErrorBoundary,[p.error]))throw p.error;return{...p,mutate:f,mutateAsync:p.mutate}}function m(){}}},function(t){t.O(0,[311,464,971,117,744],function(){return t(t.s=7577)}),_N_E=t.O()}]);