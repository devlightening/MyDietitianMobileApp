(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{2330:function(e,s,a){Promise.resolve().then(a.bind(a,986))},986:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(7437),l=a(9693),n=a(2464),r=a(2884),c=a(9116),i=a(2265),d=a(7233),m=a(9178),o=a(4226),x=a(8068),u=a(9397),h=a(4001),f=a(401);function j(){return c.Z.get("/api/access-keys?dietitianId=me").then(e=>e.data.accessKeys)}function N(e){return c.Z.post("/api/access-keys",e)}function y(){let e=(0,l.NL)(),{data:s,isLoading:a}=(0,n.a)({queryKey:["accessKeys"],queryFn:j}),[c,y]=(0,i.useState)(""),[p,g]=(0,i.useState)(""),[v,b]=(0,i.useState)(""),w=(0,r.D)({mutationFn:N,onSuccess:()=>{e.invalidateQueries({queryKey:["accessKeys"]}),y(""),g(""),b("")}});return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"Access Keys"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Generate access keys for your clients to access their meal plans and recipes."})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-6",children:"Generate New Access Key"}),(0,t.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:e=>{e.preventDefault(),w.mutate({clientId:c,startDate:p,endDate:v})},children:[(0,t.jsx)(x.I,{label:"Client ID",placeholder:"Enter client identifier",value:c,onChange:e=>y(e.target.value),required:!0}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsx)(x.I,{label:"Start Date",type:"date",value:p,onChange:e=>g(e.target.value),required:!0}),(0,t.jsx)(x.I,{label:"End Date",type:"date",value:v,onChange:e=>b(e.target.value),required:!0})]}),(0,t.jsxs)(o.z,{type:"submit",variant:"primary",loading:w.isLoading,disabled:w.isLoading,className:"w-full sm:w-auto",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),w.isLoading?"Creating...":"Generate Key"]})]})]}),a?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(d.O,{className:"h-6 w-1/2"}),(0,t.jsx)(d.O,{className:"h-4 w-2/3"}),(0,t.jsx)(d.O,{className:"h-3 w-1/4"})]}),(0,t.jsx)(d.O,{className:"h-10 w-24"})]})},s))}):(null==s?void 0:s.length)===0?(0,t.jsx)(m.Z,{className:"p-12 text-center",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(h.Z,{className:"w-8 h-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No access keys yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Generate an access key for your next client!"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:null==s?void 0:s.map(e=>(0,t.jsx)(m.Z,{className:"p-6 hover:shadow-lg transition-all duration-200 hover:border-primary/50",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-primary"}),(0,t.jsx)("code",{className:"font-mono font-semibold text-foreground text-lg",children:e.key})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-1",children:["Valid from ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.startDate})," to ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.endDate})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Client ID: ",(0,t.jsx)("span",{className:"font-mono",children:e.clientId})]})]}),(0,t.jsxs)(o.z,{variant:"primary",onClick:()=>alert("Activate key (mocked)"),className:"w-full md:w-auto",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Activate"]})]})},e.id))})]})}},4001:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])}},function(e){e.O(0,[311,464,297,971,117,744],function(){return e(e.s=2330)}),_N_E=e.O()}]);