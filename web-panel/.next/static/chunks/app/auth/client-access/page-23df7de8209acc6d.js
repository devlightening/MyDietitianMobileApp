(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{3172:function(e,n,t){Promise.resolve().then(t.bind(t,6246))},6246:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var r=t(7437),s=t(2265),a=t(9178),i=t(8068),c=t(4226),o=t(7233);function l(){let[e,n]=(0,s.useState)(""),[t,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!1);async function x(n){if(n.preventDefault(),u(!0),l(""),!e.trim()){l("Access key is required.");return}m(!0);try{let n=await fetch("/api/auth/client/access-key",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({accessKey:e})});if(!n.ok){let e=await n.text();throw Error(e||"Login failed")}window.location.href="/dashboard"}catch(e){l((null==e?void 0:e.toString())||"Login failed")}finally{m(!1)}}return f?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsxs)(a.Z,{className:"w-full max-w-md p-8 space-y-6",children:[(0,r.jsx)(o.O,{className:"h-7 w-2/3 mb-4 mx-auto"}),(0,r.jsx)(o.O,{className:"h-10 w-full mb-3"}),(0,r.jsx)(o.O,{className:"h-10 w-full mb-3"}),(0,r.jsx)(o.O,{className:"h-6 w-1/2 mx-auto"})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsxs)(a.Z,{className:"w-full max-w-md p-8 space-y-6 shadow-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-2",children:"Access Key Login"}),(0,r.jsxs)("p",{className:"text-center text-muted-foreground mb-4",children:["Enter the access key provided by your dietitian.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"If you don't have a key, please contact your dietitian."})]}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:x,children:[(0,r.jsx)(i.I,{label:"Access Key",name:"accessKey",value:e,onChange:function(e){n(e.target.value),l("")},required:!0,error:d&&t?t:""}),(0,r.jsx)(c.z,{type:"submit",className:"w-full mt-2",disabled:f,children:f?"Processing...":"Continue"})]}),t&&(0,r.jsxs)("div",{className:"flex flex-col items-center text-danger mt-4",children:[(0,r.jsx)("span",{className:"text-3xl mb-2",children:"âŒ"}),(0,r.jsx)("div",{className:"font-semibold mb-1",children:t}),(0,r.jsx)("div",{className:"text-sm",children:"Please check your key and try again."})]}),(0,r.jsx)("div",{className:"text-center text-sm mt-4",children:(0,r.jsx)("a",{href:"/auth/login",className:"text-primary hover:underline font-medium",children:"Dietitian Login"})})]})})}},4226:function(e,n,t){"use strict";t.d(n,{z:function(){return a}});var r=t(7437),s=t(4508);let a=(0,t(2265).forwardRef)((e,n)=>{let{variant:t="primary",loading:a,className:i,disabled:c,children:o,...l}=e;return(0,r.jsx)("button",{ref:n,disabled:c||a,className:(0,s.cn)("px-4 py-2 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","primary"===t&&"bg-primary text-primary-foreground hover:bg-primary/90","secondary"===t&&"bg-secondary text-secondary-foreground hover:bg-secondary/80","danger"===t&&"bg-danger text-danger-foreground hover:bg-danger/90",(c||a)&&"opacity-60 cursor-not-allowed",i),...l,children:a?(0,r.jsx)("span",{className:"animate-pulse",children:"..."}):o})});a.displayName="Button"},9178:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(7437),s=t(4508);function a(e){let{className:n,children:t}=e;return(0,r.jsx)("div",{className:(0,s.cn)("rounded-xl bg-card border border-border shadow-sm transition-all duration-200",n),children:t})}},8068:function(e,n,t){"use strict";t.d(n,{I:function(){return a}});var r=t(7437),s=t(4508);let a=(0,t(2265).forwardRef)((e,n)=>{let{label:t,error:a,helperText:i,className:c,...o}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[t&&(0,r.jsx)("label",{className:"text-sm font-medium text-foreground/80",children:t}),(0,r.jsx)("input",{ref:n,className:(0,s.cn)("border border-input rounded-md px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background",a&&"border-danger",c),...o}),a?(0,r.jsx)("span",{className:"text-xs text-danger mt-1",children:a}):i&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:i})]})});a.displayName="Input"},7233:function(e,n,t){"use strict";t.d(n,{O:function(){return s}});var r=t(7437);function s(e){let{className:n="",...t}=e;return(0,r.jsx)("div",{className:"animate-pulse rounded bg-muted/60 "+n,...t})}t(2265)},4508:function(e,n,t){"use strict";function r(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}t.d(n,{cn:function(){return r}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3172)}),_N_E=e.O()}]);